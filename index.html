<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Amiga Secreta ğŸ’Œ</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,300&family=Caveat:wght@600;700&family=Playfair+Display:ital@1&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:         #F4F2EE;
  --surface:    #FFFFFF;
  --rose-bg:    #F2E8E8;
  --lila-bg:    #E8E4F4;
  --sage-bg:    #DFF0E8;
  --text:       #181818;
  --text-md:    #555555;
  --text-soft:  #888888;
  --text-xs:    #AAAAAA;
  --border:     #D8D4CC;
  --border-str: #C4C0B8;
  --green-sb:   #1E3932;
  --green-light:#D4EDDA;
  --accent-rose:#C8505A;
  --accent-lila:#7060B8;
  --r: 18px;
  --sh:    0 2px 12px rgba(0,0,0,0.07), 0 1px 3px rgba(0,0,0,0.05);
  --sh-md: 0 6px 28px rgba(0,0,0,0.10), 0 2px 8px rgba(0,0,0,0.06);
  --sh-lg: 0 16px 56px rgba(0,0,0,0.13), 0 4px 16px rgba(0,0,0,0.07);
  --t: 0.22s ease;
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  font-weight: 400;
  line-height: 1.65;
  -webkit-font-smoothing: antialiased;
  padding-bottom: 100px;
}

/* Subtle bg texture */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: radial-gradient(circle at 20% 20%, rgba(200,80,90,0.04) 0%, transparent 50%),
                    radial-gradient(circle at 80% 80%, rgba(112,96,184,0.04) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

/* â”€â”€â”€ Scroll reveal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.reveal {
  opacity: 0;
  transform: translateY(24px);
  transition: opacity 0.55s cubic-bezier(0.22,1,0.36,1), transform 0.55s cubic-bezier(0.22,1,0.36,1);
}
.reveal.visible { opacity: 1; transform: translateY(0); }
.reveal.d1 { transition-delay: 0.05s; }
.reveal.d2 { transition-delay: 0.18s; }
.reveal.d3 { transition-delay: 0.28s; }
.reveal.d4 { transition-delay: 0.38s; }

/* â”€â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.page {
  max-width: 680px;
  margin: 0 auto;
  padding: 56px 20px 0;
  display: flex;
  flex-direction: column;
  gap: 20px;
  position: relative; z-index: 1;
}

/* â”€â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero {
  background: var(--surface);
  border-radius: var(--r);
  box-shadow: var(--sh-md);
  padding: 52px 48px 44px;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.hero::after {
  content: '';
  position: absolute;
  bottom: -80px; right: -80px;
  width: 240px; height: 240px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(200,80,90,0.05) 0%, transparent 70%);
  pointer-events: none;
}
.hero-blob {
  position: absolute;
  top: -60px; left: -60px;
  width: 200px; height: 200px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(112,96,184,0.06) 0%, transparent 70%);
  pointer-events: none;
}

.eyebrow {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--text-soft);
  margin-bottom: 18px;
}
.hero-icon { font-size: 2.2rem; display: block; margin-bottom: 14px; }
.hero-headline {
  font-family: 'Caveat', cursive;
  font-size: 2.8rem;
  font-weight: 700;
  color: var(--text);
  line-height: 1.1;
  margin-bottom: 22px;
  position: relative; z-index: 1;
}
.hero-rule {
  width: 44px; height: 2px;
  background: linear-gradient(90deg, var(--accent-rose), var(--accent-lila));
  margin: 0 auto 26px;
  border-radius: 2px;
}

.message {
  font-size: 0.95rem;
  font-weight: 400;
  color: var(--text-md);
  line-height: 1.8;
  max-width: 460px;
  margin: 0 auto;
  text-align: left;
  position: relative; z-index: 1;
}
.message strong { font-weight: 600; color: var(--text); }
.traits {
  list-style: none;
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.traits li {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  font-size: 0.91rem;
  color: var(--text-md);
  background: var(--bg);
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid var(--border);
}
.traits li span {
  font-size: 0.95rem;
  flex-shrink: 0;
  margin-top: 1px;
}

/* â”€â”€â”€ 2-col grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.grid2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  align-items: start;
}
@media (max-width: 540px) {
  .grid2 { grid-template-columns: 1fr; }
  .hero { padding: 40px 26px 36px; }
  .hero-headline { font-size: 2.2rem; }
}

/* â”€â”€â”€ Card base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card {
  background: var(--surface);
  border-radius: var(--r);
  border: 1px solid var(--border);
  box-shadow: var(--sh);
  overflow: hidden;
  transition: box-shadow var(--t), transform var(--t);
  cursor: default;
}
.card:hover {
  box-shadow: var(--sh-md);
  transform: translateY(-2px);
}
.card-inner { padding: 26px; }

/* Card color accent top bar */
.card-accent {
  height: 3px;
  border-radius: var(--r) var(--r) 0 0;
}
.accent-lila { background: linear-gradient(90deg, #8B77D4, #B49AE8); }
.accent-rose { background: linear-gradient(90deg, var(--accent-rose), #E08070); }

/* â”€â”€â”€ Playlist card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card-playlist { background: #FAFAFE; }
.card-playlist .card-inner { background: #FAFAFE; }

.playlist-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}
.playlist-icon-wrap {
  width: 44px; height: 44px;
  border-radius: 12px;
  background: var(--lila-bg);
  border: 1px solid #D0CCEA;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3rem;
  flex-shrink: 0;
}
.card-tag {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--accent-lila);
}
.card-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text);
  line-height: 1.3;
  margin-bottom: 8px;
}
.card-text {
  font-size: 0.85rem;
  font-weight: 400;
  color: var(--text-md);
  line-height: 1.7;
  margin-bottom: 16px;
}

/* Waveform decoration */
.waveform {
  display: flex;
  align-items: center;
  gap: 2px;
  margin-bottom: 16px;
  height: 24px;
}
.waveform-bar {
  width: 3px;
  border-radius: 2px;
  background: linear-gradient(180deg, #8B77D4, #B49AE8);
  animation: wave 1.2s ease-in-out infinite;
}
.waveform-bar:nth-child(1) { height: 8px; animation-delay: 0s; }
.waveform-bar:nth-child(2) { height: 16px; animation-delay: 0.1s; }
.waveform-bar:nth-child(3) { height: 22px; animation-delay: 0.2s; }
.waveform-bar:nth-child(4) { height: 14px; animation-delay: 0.3s; }
.waveform-bar:nth-child(5) { height: 20px; animation-delay: 0.4s; }
.waveform-bar:nth-child(6) { height: 10px; animation-delay: 0.5s; }
.waveform-bar:nth-child(7) { height: 18px; animation-delay: 0.35s; }
.waveform-bar:nth-child(8) { height: 12px; animation-delay: 0.15s; }

@keyframes wave {
  0%, 100% { transform: scaleY(0.5); opacity: 0.5; }
  50% { transform: scaleY(1); opacity: 1; }
}

.btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: var(--text);
  color: #fff;
  font-family: 'DM Sans', sans-serif;
  font-size: 0.8rem;
  font-weight: 600;
  text-decoration: none;
  padding: 10px 20px;
  border-radius: 30px;
  border: none;
  cursor: pointer;
  transition: background var(--t), box-shadow var(--t), transform var(--t);
  letter-spacing: 0.02em;
}
.btn:hover {
  background: #2E2E2E;
  box-shadow: 0 4px 16px rgba(0,0,0,0.18);
  transform: translateY(-1px);
}
.btn-lila {
  background: linear-gradient(135deg, #7B67D0, #9B82E0);
}
.btn-lila:hover {
  background: linear-gradient(135deg, #6B57C0, #8B72D0);
  box-shadow: 0 4px 16px rgba(123,103,208,0.35);
}
.btn svg { width: 14px; height: 14px; fill: currentColor; flex-shrink: 0; }

/* â”€â”€â”€ Scratch card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card-scratch { background: #FFF9F9; }

.scratch-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}
.scratch-icon-wrap {
  width: 44px; height: 44px;
  border-radius: 12px;
  background: var(--rose-bg);
  border: 1px solid #DFCECE;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3rem;
  flex-shrink: 0;
}
.card-tag-rose {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--accent-rose);
}

/* â”€â”€â”€ SCRATCH ZONE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.scratch-zone {
  position: relative;
  width: 100%;
  height: 210px;
  border-radius: 14px;
  overflow: hidden;
  cursor: crosshair;
  touch-action: none;
  margin-top: 6px;
  box-shadow: inset 0 2px 8px rgba(0,0,0,0.06);
}

/* Prize underneath */
.prize-reveal {
  position: absolute;
  inset: 0;
  background: linear-gradient(160deg, var(--green-sb) 0%, #2D5A4A 100%);
  border-radius: 14px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 20px;
}
.prize-drinks {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 8px;
  margin-bottom: 4px;
}
.prize-cup {
  font-size: 3.8rem;
  line-height: 1;
  filter: drop-shadow(0 4px 12px rgba(0,0,0,0.3));
}
.prize-cookie {
  font-size: 2.2rem;
  line-height: 1;
  margin-bottom: 4px;
  filter: drop-shadow(0 3px 8px rgba(0,0,0,0.25));
}
.prize-title {
  font-family: 'DM Sans', sans-serif;
  font-size: 0.88rem;
  font-weight: 700;
  color: #FFFFFF;
  text-align: center;
  letter-spacing: 0.04em;
  line-height: 1.4;
}
.prize-sub {
  font-size: 0.72rem;
  font-weight: 400;
  color: rgba(255,255,255,0.65);
  text-align: center;
  letter-spacing: 0.06em;
  text-transform: uppercase;
}
.prize-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: rgba(255,255,255,0.15);
  border: 1px solid rgba(255,255,255,0.25);
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 0.72rem;
  font-weight: 600;
  color: rgba(255,255,255,0.9);
  letter-spacing: 0.05em;
}

/* The scratch canvas */
#scratchCanvas {
  position: absolute;
  inset: 0;
  border-radius: 14px;
  z-index: 2;
  transition: opacity 0.5s ease;
}

/* â”€â”€â”€ Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(244,242,238,0.80);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  z-index: 400;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}
.overlay.open { opacity: 1; pointer-events: all; }

.modal {
  background: var(--surface);
  border-radius: 24px;
  border: 1px solid var(--border);
  box-shadow: var(--sh-lg);
  padding: 48px 44px 38px;
  max-width: 420px;
  width: 100%;
  text-align: center;
  transform: scale(0.90) translateY(16px);
  transition: transform 0.40s cubic-bezier(0.22, 1, 0.36, 1);
  position: relative;
  overflow: hidden;
}
.modal::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 4px;
  background: linear-gradient(90deg, #1E3932, #2D7A52, #1E3932);
}
.overlay.open .modal { transform: scale(1) translateY(0); }

.modal-ico { font-size: 2.8rem; display: block; margin-bottom: 16px; }
.modal-title {
  font-size: 1.4rem;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 8px;
  letter-spacing: -0.01em;
}
.modal-rule {
  width: 36px; height: 2px;
  background: linear-gradient(90deg, var(--accent-rose), var(--accent-lila));
  margin: 0 auto 20px;
  border-radius: 2px;
}
.modal-msg {
  font-size: 0.92rem;
  font-weight: 400;
  color: var(--text-md);
  line-height: 1.75;
  margin-bottom: 24px;
}
.modal-msg strong { font-weight: 600; color: var(--text); }

.sb-card {
  background: linear-gradient(135deg, var(--green-sb) 0%, #2D5A4A 100%);
  border-radius: 16px;
  padding: 20px 24px;
  margin-bottom: 24px;
  display: flex;
  align-items: center;
  gap: 16px;
  text-align: left;
}
.sb-card-emoji { font-size: 2.4rem; flex-shrink: 0; }
.sb-card-text { flex: 1; }
.sb-card-label {
  font-size: 0.72rem;
  font-weight: 600;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: rgba(255,255,255,0.6);
  margin-bottom: 4px;
}
.sb-card-prize {
  font-size: 0.9rem;
  font-weight: 600;
  color: #FFFFFF;
  line-height: 1.4;
}

.modal-footer-txt {
  font-size: 0.8rem;
  color: var(--text-soft);
  margin-bottom: 6px;
}
.modal-sig {
  font-family: 'Playfair Display', serif;
  font-style: italic;
  font-size: 1.7rem;
  color: var(--text-md);
  margin-bottom: 24px;
  display: block;
}
.btn-close {
  background: none;
  border: 1.5px solid var(--border-str);
  color: var(--text-md);
  font-family: 'DM Sans', sans-serif;
  font-size: 0.8rem;
  font-weight: 500;
  padding: 9px 24px;
  border-radius: 30px;
  cursor: pointer;
  transition: border-color var(--t), color var(--t), transform var(--t);
}
.btn-close:hover {
  border-color: var(--text);
  color: var(--text);
  transform: translateY(-1px);
}

/* â”€â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.footer {
  text-align: center;
  font-size: 0.73rem;
  color: var(--text-xs);
  padding-top: 4px;
  letter-spacing: 0.04em;
}

/* â”€â”€â”€ Confetti â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#cfCanvas {
  position: fixed; inset: 0;
  pointer-events: none; z-index: 500;
}

/* â”€â”€â”€ Sound toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sound-toggle {
  position: fixed;
  bottom: 24px; right: 24px;
  width: 40px; height: 40px;
  border-radius: 50%;
  background: var(--surface);
  border: 1.5px solid var(--border-str);
  box-shadow: var(--sh);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  cursor: pointer;
  z-index: 200;
  transition: box-shadow var(--t), transform var(--t);
}
.sound-toggle:hover { box-shadow: var(--sh-md); transform: scale(1.08); }
</style>
</head>
<body>

<canvas id="cfCanvas"></canvas>

<!-- Sound toggle -->
<button class="sound-toggle" id="soundToggle" title="Activar/desactivar sonidos" aria-label="Toggle sounds">ğŸ”Š</button>

<!-- MODAL -->
<div class="overlay" id="overlay">
  <div class="modal" id="modal">
    <span class="modal-ico">ğŸ‰</span>
    <h2 class="modal-title">Â¡Felicidades!</h2>
    <div class="modal-rule"></div>
    <p class="modal-msg">
      Ganaste un regalo especial de Starbucks â˜•<br>
      <span style="font-size:0.83rem;color:var(--text-soft);">Espero que lo disfrutes muchÃ­simo.</span>
    </p>
    <div class="sb-card">
      <div class="sb-card-emoji">â˜•ğŸª</div>
      <div class="sb-card-text">
        <div class="sb-card-label">Tu premio</div>
        <div class="sb-card-prize">Caramel Frappuccino Grande<br>+ Galleta Chocochips</div>
      </div>
    </div>
    <p class="modal-footer-txt">Feliz DÃ­a del Amor y la Amistad ğŸ’›</p>
    <span class="modal-sig">Yoma Arenas</span>
    <button class="btn-close" id="btnClose">Cerrar</button>
  </div>
</div>

<!-- PAGE -->
<div class="page">

  <!-- HERO -->
  <section class="hero reveal d1">
    <div class="hero-blob"></div>
    <p class="eyebrow">13 de Febrero Â· Amor &amp; Amistad</p>
    <span class="hero-icon">ğŸ’Œ</span>
    <h1 class="hero-headline">Soy tu amiga secreta</h1>
    <div class="hero-rule"></div>
    <div class="message">
      <p>No te conozco mucho, pero hay cosas que <strong>se notan</strong>. Tres cosas que seguro te hacen genial:</p>
      <ul class="traits">
        <li><span>âœ¦</span> Eres enfocada y trabajadora.</li>
        <li><span>âœ¦</span> Inteligente y muy responsable.</li>
        <li><span>âœ¦</span> Aunque parezcas callada, transmites mucha amabilidad y disposiciÃ³n para ayudar.</li>
      </ul>
    </div>
  </section>

  <!-- GRID -->
  <div class="grid2">

    <!-- Playlist -->
    <div class="card card-playlist reveal d2" id="cardPlaylist">
      <div class="card-accent accent-lila"></div>
      <div class="card-inner">
        <div class="playlist-header">
          <div class="playlist-icon-wrap">ğŸ§</div>
          <div>
            <div class="card-tag">Playlist</div>
            <div class="card-title" style="margin-top:3px;">Un pedacito de mÃ­<br>en canciones âœ¨</div>
          </div>
        </div>
        <p class="card-text">No sÃ© cuÃ¡l es tu estilo musical, pero quise compartirte mÃºsica que me alegra el dÃ­a.</p>
        <div class="waveform">
          <div class="waveform-bar"></div>
          <div class="waveform-bar"></div>
          <div class="waveform-bar"></div>
          <div class="waveform-bar"></div>
          <div class="waveform-bar"></div>
          <div class="waveform-bar"></div>
          <div class="waveform-bar"></div>
          <div class="waveform-bar"></div>
        </div>
        <a class="btn btn-lila" href="https://open.spotify.com/playlist/1t29R2QVf7nRwtMnIADGG7?si=90g3_JsYQsO6JbEJ4swtlA" target="_blank" rel="noopener" id="btnPlaylist">
          <svg viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
          Abrir playlist
        </a>
      </div>
    </div>

    <!-- Scratch -->
    <div class="card card-scratch reveal d3" id="cardScratch">
      <div class="card-accent accent-rose"></div>
      <div class="card-inner">
        <div class="scratch-header">
          <div class="scratch-icon-wrap">ğŸ</div>
          <div>
            <div class="card-tag-rose">Sorpresa</div>
            <div class="card-title" style="margin-top:3px;">Tu regalo ğŸ‘€<br><span style="font-size:0.78rem;font-weight:400;color:var(--text-soft);">Raspa para descubrir</span></div>
          </div>
        </div>
        <!-- Big scratch zone -->
        <div class="scratch-zone" id="scratchZone">
          <!-- Prize layer underneath -->
          <div class="prize-reveal">
            <div class="prize-drinks">
              <div class="prize-cup">â˜•</div>
              <div class="prize-cookie">ğŸª</div>
            </div>
            <div class="prize-title">Caramel Frappuccino Grande<br>+ Galleta Chocochips</div>
            <div class="prize-badge">â˜• Starbucks Â· DisfrÃºtalo</div>
            <div class="prize-sub">Tu regalo especial</div>
          </div>
          <!-- Canvas on top -->
          <canvas id="scratchCanvas"></canvas>
        </div>
      </div>
    </div>

  </div>

  <!-- FOOTER -->
  <footer class="footer reveal d4">
    Hecho con cariÃ±o Â· Amor &amp; Amistad 2025 Â·
    <em style="font-family:'Playfair Display',serif;font-style:italic;">Yoma Arenas</em>
  </footer>

</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WEB AUDIO â€” all sounds generated in-browser
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let audioCtx = null;
let soundOn  = true;

function getAudio() {
  if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  return audioCtx;
}

// Soft "pop" for card hover
function playPop(freq = 500, vol = 0.07) {
  if (!soundOn) return;
  try {
    const a = getAudio();
    const osc = a.createOscillator();
    const g   = a.createGain();
    osc.connect(g); g.connect(a.destination);
    osc.type = 'sine';
    osc.frequency.setValueAtTime(freq, a.currentTime);
    osc.frequency.exponentialRampToValueAtTime(freq * 0.5, a.currentTime + 0.08);
    g.gain.setValueAtTime(vol, a.currentTime);
    g.gain.exponentialRampToValueAtTime(0.0001, a.currentTime + 0.12);
    osc.start(); osc.stop(a.currentTime + 0.12);
  } catch(e) {}
}

// Gentle whoosh for scroll reveal
function playWhoosh() {
  if (!soundOn) return;
  try {
    const a = getAudio();
    const buf = a.createBuffer(1, a.sampleRate * 0.12, a.sampleRate);
    const data = buf.getChannelData(0);
    for (let i = 0; i < data.length; i++) data[i] = (Math.random() * 2 - 1);
    const src = a.createBufferSource();
    const filt = a.createBiquadFilter();
    const g = a.createGain();
    filt.type = 'bandpass'; filt.frequency.value = 1200; filt.Q.value = 0.8;
    src.buffer = buf;
    src.connect(filt); filt.connect(g); g.connect(a.destination);
    g.gain.setValueAtTime(0, a.currentTime);
    g.gain.linearRampToValueAtTime(0.04, a.currentTime + 0.04);
    g.gain.exponentialRampToValueAtTime(0.0001, a.currentTime + 0.12);
    src.start(); src.stop(a.currentTime + 0.14);
  } catch(e) {}
}

// Scratch friction sound
let lastScratchTime = 0;
function playScratch() {
  if (!soundOn) return;
  const now = Date.now();
  if (now - lastScratchTime < 60) return; // throttle
  lastScratchTime = now;
  try {
    const a = getAudio();
    const dur = 0.06;
    const buf = a.createBuffer(1, Math.floor(a.sampleRate * dur), a.sampleRate);
    const data = buf.getChannelData(0);
    for (let i = 0; i < data.length; i++) data[i] = (Math.random() * 2 - 1);
    const src = a.createBufferSource();
    const filt = a.createBiquadFilter();
    const g = a.createGain();
    filt.type = 'bandpass'; filt.frequency.value = 3000; filt.Q.value = 1.5;
    src.buffer = buf;
    src.connect(filt); filt.connect(g); g.connect(a.destination);
    g.gain.setValueAtTime(0.12, a.currentTime);
    g.gain.exponentialRampToValueAtTime(0.0001, a.currentTime + dur);
    src.start(); src.stop(a.currentTime + dur);
  } catch(e) {}
}

// Success chime (4 ascending tones)
function playChime() {
  if (!soundOn) return;
  try {
    const a = getAudio();
    const notes = [523.25, 659.25, 783.99, 1046.50]; // C5 E5 G5 C6
    notes.forEach((freq, i) => {
      const osc = a.createOscillator();
      const g   = a.createGain();
      osc.type = 'sine';
      osc.connect(g); g.connect(a.destination);
      osc.frequency.value = freq;
      const t = a.currentTime + i * 0.13;
      g.gain.setValueAtTime(0, t);
      g.gain.linearRampToValueAtTime(0.18, t + 0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, t + 0.50);
      osc.start(t); osc.stop(t + 0.55);
    });
  } catch(e) {}
}

// Sound toggle button
const soundToggle = document.getElementById('soundToggle');
soundToggle.addEventListener('click', () => {
  soundOn = !soundOn;
  soundToggle.textContent = soundOn ? 'ğŸ”Š' : 'ğŸ”‡';
  playPop(700, 0.05);
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLL REVEAL via IntersectionObserver
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const io = new IntersectionObserver((entries) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.classList.add('visible');
      playWhoosh();
      io.unobserve(e.target);
    }
  });
}, { threshold: 0.10 });
document.querySelectorAll('.reveal').forEach(el => io.observe(el));

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARD HOVER SOUNDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.getElementById('cardPlaylist').addEventListener('mouseenter', () => playPop(480, 0.06));
document.getElementById('cardScratch').addEventListener('mouseenter', () => playPop(420, 0.06));
document.getElementById('btnPlaylist').addEventListener('mouseenter', () => playPop(620, 0.06));

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCRATCH CARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const zone   = document.getElementById('scratchZone');
const canvas = document.getElementById('scratchCanvas');
const ctx    = canvas.getContext('2d');
let drawing  = false, done = false;

function resizeCanvas() {
  const r = zone.getBoundingClientRect();
  canvas.width  = r.width;
  canvas.height = r.height;
  drawSurface();
}

function drawSurface() {
  // Textured scratch surface â€” warm gray-rose
  const g = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
  g.addColorStop(0, '#C8BCB8');
  g.addColorStop(0.5, '#C0BAC4');
  g.addColorStop(1, '#C8B8BC');
  ctx.fillStyle = g;
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Fine grid texture
  ctx.strokeStyle = 'rgba(255,255,255,0.08)';
  ctx.lineWidth = 0.5;
  for (let x = 0; x < canvas.width; x += 8) {
    ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x, canvas.height); ctx.stroke();
  }
  for (let y = 0; y < canvas.height; y += 8) {
    ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(canvas.width,y); ctx.stroke();
  }

  // Diagonal pattern
  ctx.strokeStyle = 'rgba(0,0,0,0.04)';
  ctx.lineWidth = 1;
  for (let i = -canvas.height; i < canvas.width + canvas.height; i += 18) {
    ctx.beginPath(); ctx.moveTo(i, 0); ctx.lineTo(i + canvas.height, canvas.height); ctx.stroke();
  }

  // Central hint
  ctx.fillStyle = 'rgba(255,255,255,0.82)';
  ctx.font = '600 14px DM Sans, sans-serif';
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText('âœ¦  Raspa aquÃ­ para revelar  âœ¦', canvas.width / 2, canvas.height / 2 - 10);
  ctx.font = '400 11.5px DM Sans, sans-serif';
  ctx.fillStyle = 'rgba(255,255,255,0.55)';
  ctx.fillText('Arrastra el dedo o el cursor', canvas.width / 2, canvas.height / 2 + 14);
}

function getPos(e) {
  const r = canvas.getBoundingClientRect();
  if (e.touches) return { x: e.touches[0].clientX - r.left, y: e.touches[0].clientY - r.top };
  return { x: e.clientX - r.left, y: e.clientY - r.top };
}

function scratchAt(x, y) {
  ctx.globalCompositeOperation = 'destination-out';
  // Soft eraser with feathered edge
  const rad = ctx.createRadialGradient(x, y, 0, x, y, 28);
  rad.addColorStop(0, 'rgba(0,0,0,1)');
  rad.addColorStop(0.7, 'rgba(0,0,0,0.9)');
  rad.addColorStop(1, 'rgba(0,0,0,0)');
  ctx.fillStyle = rad;
  ctx.beginPath(); ctx.arc(x, y, 28, 0, Math.PI * 2); ctx.fill();
  playScratch();
  checkDone();
}

function checkDone() {
  if (done) return;
  const d = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
  let empty = 0;
  for (let i = 3; i < d.length; i += 4) if (d[i] < 20) empty++;
  if (empty / (d.length / 4) > 0.50) {
    done = true;
    canvas.style.opacity = '0';
    setTimeout(() => { canvas.style.display = 'none'; openModal(); }, 450);
  }
}

canvas.addEventListener('mousedown',  e => { drawing = true; const p = getPos(e); scratchAt(p.x, p.y); });
canvas.addEventListener('mousemove',  e => { if (drawing) { const p = getPos(e); scratchAt(p.x, p.y); } });
canvas.addEventListener('mouseup',    () => drawing = false);
canvas.addEventListener('mouseleave', () => drawing = false);
canvas.addEventListener('touchstart', e => { e.preventDefault(); drawing = true; const p = getPos(e); scratchAt(p.x, p.y); }, { passive:false });
canvas.addEventListener('touchmove',  e => { e.preventDefault(); const p = getPos(e); scratchAt(p.x, p.y); }, { passive:false });
canvas.addEventListener('touchend',   () => drawing = false);
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const overlay  = document.getElementById('overlay');
const btnClose = document.getElementById('btnClose');

function openModal() {
  overlay.classList.add('open');
  playChime();
  launchConfetti();
}
btnClose.addEventListener('click', () => { overlay.classList.remove('open'); playPop(320, 0.05); });
overlay.addEventListener('click', e => { if (e.target === overlay) { overlay.classList.remove('open'); playPop(320, 0.05); } });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI (minimal pastel)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const cf = document.getElementById('cfCanvas');
const cfCtx = cf.getContext('2d');
let particles = [];

function launchConfetti() {
  cf.width = innerWidth; cf.height = innerHeight;
  const colors = ['#C9BED8','#D8BEC0','#B8D0C4','#DDD0B8','#CCCCCC','#D4C0D8','#C0D8C4'];
  for (let i = 0; i < 90; i++) {
    particles.push({
      x: Math.random() * cf.width,
      y: -20 - Math.random() * 100,
      vx: (Math.random() - 0.5) * 3.5,
      vy: 1.8 + Math.random() * 3.2,
      rot: Math.random() * 360,
      rotV: (Math.random() - 0.5) * 7,
      w: 5 + Math.random() * 8,
      h: 3 + Math.random() * 5,
      color: colors[Math.floor(Math.random() * colors.length)],
      alpha: 1,
      delay: Math.floor(Math.random() * 60)
    });
  }
  animateCF();
}

function animateCF() {
  cfCtx.clearRect(0, 0, cf.width, cf.height);
  particles = particles.filter(p => p.alpha > 0.01);
  for (const p of particles) {
    if (p.delay-- > 0) continue;
    p.x += p.vx; p.y += p.vy; p.vy += 0.065; p.rot += p.rotV;
    if (p.y > cf.height * 0.70) p.alpha -= 0.020;
    cfCtx.save();
    cfCtx.globalAlpha = Math.max(0, p.alpha);
    cfCtx.fillStyle = p.color;
    cfCtx.translate(p.x, p.y);
    cfCtx.rotate(p.rot * Math.PI / 180);
    cfCtx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
    cfCtx.restore();
  }
  if (particles.length) requestAnimationFrame(animateCF);
  else cfCtx.clearRect(0, 0, cf.width, cf.height);
}
</script>
</body>
</html>
